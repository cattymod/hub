<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CattyMod Dashboard</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Inter', sans-serif; }
    body { display: flex; min-height: 100vh; background-color: #f9fafb; color: #1f2937; overflow: hidden; }

    /* Sidebar */
    .sidebar {
      width: 250px;
      background-color: #ffffff;
      border-right: 1px solid #e5e7eb;
      display: flex; flex-direction: column;
      padding: 20px; overflow-y: auto;
    }
    .sidebar h2 {
      margin-bottom: 40px; font-weight: 700;
      font-size: 1.5rem; text-align: left;
    }
    .sidebar h2 .blue { color: #0ea5e9; }
    .sidebar a {
      display: flex; align-items: center; gap: 12px;
      color: #374151; text-decoration: none; margin-bottom: 20px;
      font-weight: 500; transition: color 0.2s, background 0.2s;
      padding: 8px 12px; border-radius: 8px; cursor: pointer;
    }
    .sidebar a:hover { background-color: #e0f2fe; color: #0ea5e9; }
    .sidebar a i { width: 20px; text-align: center; }
    .sidebar a.active { background-color: #bae6fd; color: #0ea5e9; }

    /* Bottom buttons */
    .bottom-buttons {
      margin-top: auto; display:flex; flex-direction:column; gap:8px;
      border-top: 1px solid #e5e7eb; padding-top: 15px;
    }
    .logout {
      background: none; border: none;
      color: #ef4444; font-weight: 600;
      display: flex; align-items: center; gap: 10px;
      padding: 8px 12px; cursor: pointer; border-radius: 8px;
    }
    .logout i { color: #ef4444; }
    .logout:hover { background: #fee2e2; }

    .sidebar .github {
      color:#374151; display:flex; align-items:center; gap:10px;
      padding:8px 12px; border-radius:8px; text-decoration:none;
    }
    .sidebar .github:hover { background:#e0f2fe; color:#0ea5e9; }

    /* Main content */
    .main-content { flex-grow: 1; display: flex; flex-direction: column; }
    .content-frame { flex-grow: 1; border: none; width: 100%; height: 100%; }
  </style>
</head>
<body>

<!-- Sidebar -->
<div class="sidebar">
  <h2><span class="blue">Catty</span>Mod</h2>
  <a onclick="loadHome(this)" class="active" id="homeBtn"><i class="fas fa-house"></i>Home</a>
  <a href="https://cattymod.github.io/editor" target="_blank" data-app="Editor"><i class="fas fa-edit"></i>Editor</a>
  <a onclick="loadApp('https://cattymod.github.io/jr', this)" data-app="CattyMod Jr"><i class="fas fa-clone"></i>CattyMod Jr</a>
  <a onclick="loadApp('https://cattymod.github.io/linux/', this)" data-app="CattyLinux"><i class="fas fa-cat"></i>CattyLinux</a>
  <a onclick="loadApp('https://cattymod.github.io/admin/', this)" data-app="CattyAdmin"><i class="fas fa-gamepad"></i>CattyAdmin</a>
  <a onclick="loadApp('https://cattymod.github.io/packager/', this)" data-app="Packager"><i class="fas fa-box-open"></i>Packager</a>
  <a href="https://cattymod.github.io/ImproveMyScratch" target="_blank" data-app="ImproveMyScratch"><i class="fas fa-thumbs-up"></i>ImproveMyScratch</a>
  <a onclick="loadApp('https://cattymod.github.io/pass', this)" data-app="CattyPassword Manager"><i class="fas fa-key"></i>CattyPassword Manager</a>
  <a onclick="loadApp('https://cattymod.github.io/linux/maker/', this)" data-app="Linux Maker"><i class="fas fa-marker"></i>Linux Maker</a>
  <!-- Scrooch Sponsored -->
  <a onclick="loadApp('https://scrooch-project.github.io', this)" data-app="Scrooch">
    <i class="fas fa-rocket"></i>Scrooch <span style="background:#50c878;color:white;font-size:0.7rem;padding:2px 6px;margin-left:auto;border-radius:4px;">SPONSORED</span>
  </a>

  <div class="bottom-buttons">
    <a href="https://github.com/cattymod" target="_blank" class="github"><i class="fab fa-github"></i> GitHub</a>
    <button class="logout" id="logoutBtn">
      <i class="fas fa-door-open"></i> Log out
    </button>
  </div>
</div>

<div class="main-content">
  <iframe class="content-frame" id="contentFrame"></iframe>
</div>

<script>
function getCookie(name) {
  const value = `; ${document.cookie}`;
  const parts = value.split(`; ${name}=`);
  if (parts.length === 2) return parts.pop().split(';').shift();
}
if (!getCookie("CattyAuth")) window.location.href = '/login/';

document.getElementById("logoutBtn").addEventListener("click", () => {
  document.cookie = "CattyAuth=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
  window.location.href = '/login/';
});

const apps = [
  {name: "Editor", icon:"fas fa-edit", url:"https://cattymod.github.io/editor", external:true},
  {name: "CattyMod Jr", icon:"fas fa-clone", url:"https://cattymod.github.io/jr"},
  {name: "CattyLinux", icon:"fas fa-cat", url:"https://cattymod.github.io/linux/"},
  {name: "CattyAdmin", icon:"fas fa-gamepad", url:"https://cattymod.github.io/admin/"},
  {name: "Packager", icon:"fas fa-box-open", url:"https://cattymod.github.io/packager/"},
  {name: "ImproveMyScratch", icon:"fas fa-thumbs-up", url:"https://cattymod.github.io/improvemyscratch", external:true},
  {name: "CattyPassword Manager", icon:"fas fa-key", url:"https://cattymod.github.io/pass"},
  {name: "Linux Maker", icon:"fas fa-marker", url:"https://cattymod.github.io/linux/maker/"},
  {name: "Scrooch", icon:"fas fa-rocket", url:"https://scrooch-project.github.io", sponsored:true}
];

function findSidebarLink(appName) {
  return Array.from(document.querySelectorAll('.sidebar a')).find(a => a.dataset.app === appName);
}

function loadHome(element){
  document.querySelectorAll('.sidebar a').forEach(a => a.classList.remove('active'));
  if(element) element.classList.add('active');

  const iframe = document.getElementById('contentFrame');
  const doc = iframe.contentDocument || iframe.contentWindow.document;
  doc.open();
  doc.write(`<h1 style="padding:20px;">Welcome to CattyMod!</h1>`);
  doc.close();
}

function loadApp(url, element){
  const iframe = document.getElementById('contentFrame');
  iframe.src = url;
  document.querySelectorAll('.sidebar a').forEach(a => a.classList.remove('active'));
  if(element) element.classList.add('active');
}

window.addEventListener("DOMContentLoaded", () => {
  loadHome(document.getElementById('homeBtn'));
});
</script>
</body>
</html>
